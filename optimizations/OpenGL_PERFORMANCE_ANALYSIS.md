# OpenGL –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ - Cubes Portals And Weapons

## üìä –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 5.5/10

–í–∞—à –ø—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenGL –Ω–∞ **–±–∞–∑–æ–≤–æ–º —É—Ä–æ–≤–Ω–µ**, —Å **–º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**. –ù–∏–∂–µ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö –ø—Ä–æ–±–ª–µ–º –∏ —Ä–µ—à–µ–Ω–∏–π.

---

## üî¥ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–ò–∑–±—ã—Ç–æ—á–Ω—ã–µ –≤—ã–∑–æ–≤—ã glGetUniformLocation() –≤ —Ü–∏–∫–ª–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞**
**–§–∞–π–ª:** [src/engine/graphics/renderer_3d.py](src/engine/graphics/renderer_3d.py#L50-L55)

```python
# ‚ùå –ü–õ–û–•–û: –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –î–õ–Ø –ö–ê–ñ–î–û–ì–û –û–ë–™–ï–ö–¢–ê –≤ frame
glUniformMatrix4fv(glGetUniformLocation(shader, "mvp"), 1, GL_TRUE, mvp)
glUniformMatrix4fv(glGetUniformLocation(shader, "model"), 1, GL_TRUE, model)
glUniform3fv(glGetUniformLocation(shader, "lightPos"), 1, light_pos)
glUniform3fv(glGetUniformLocation(shader, "viewPos"), 1, camera_pos)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** `glGetUniformLocation()` - —ç—Ç–æ –ø–æ–∏—Å–∫ –ø–æ —Å—Ç—Ä–æ–∫–µ, –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è. –ö—ç—à–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —à–µ–π–¥–µ—Ä–∞, –Ω–æ –Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 5-10% –Ω–∞ –Ω–µ–±–æ–ª—å—à–∏—Ö —Å—Ü–µ–Ω–∞—Ö, 20%+ –Ω–∞ —Å—Ü–µ–Ω–∞—Ö —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –æ–±—ä–µ–∫—Ç–æ–≤.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:** –ö—ç—à–∏—Ä—É–π—Ç–µ uniform locations –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —à–µ–π–¥–µ—Ä–∞:
```python
# –í ShaderUtils –∏–ª–∏ GameWindow.__init__
self.__3d_uniforms = {
    "mvp": glGetUniformLocation(self.__3d_shader, "mvp"),
    "model": glGetUniformLocation(self.__3d_shader, "model"),
    "lightPos": glGetUniformLocation(self.__3d_shader, "lightPos"),
    "viewPos": glGetUniformLocation(self.__3d_shader, "viewPos"),
    "objectColor": glGetUniformLocation(self.__3d_shader, "objectColor"),
}

# –ó–∞—Ç–µ–º –≤ draw_3d_model():
glUniformMatrix4fv(self.__3d_uniforms["mvp"], 1, GL_TRUE, mvp)
```

---

### 2. **–ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è view –∏ projection –º–∞—Ç—Ä–∏—Ü—ã**
**–§–∞–π–ª:** [src/game/windows/game_window.py](src/game/windows/game_window.py#L160-L170)

```python
# ‚ùå –ü–õ–û–•–û: –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è –≤ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ (60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É)
view = OpenGLUtils.look_at(
    np.array([0.0, 0.0, 50], dtype=np.float32),
    np.array([0.0, 0.0, 0.0], dtype=np.float32),
    np.array([0.0, 1.0, 0.0], dtype=np.float32)
)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –≠—Ç–∏ –º–∞—Ç—Ä–∏—Ü—ã –°–¢–ê–¢–ò–ß–ù–´ (–∫–∞–º–µ—Ä–∞ –Ω–µ –¥–≤–∏–∂–µ—Ç—Å—è). –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—Ç—å –∏—Ö –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä - –ø—É—Å—Ç–∞—è —Ç—Ä–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å–æ–≤.

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 2-3% –Ω–∞ 60 FPS.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:** –í—ã—á–∏—Å–ª–∏—Ç–µ –æ–¥–∏–Ω —Ä–∞–∑ –≤ `__init__`:
```python
self.__view = OpenGLUtils.look_at(
    np.array([0.0, 0.0, 50], dtype=np.float32),
    np.array([0.0, 0.0, 0.0], dtype=np.float32),
    np.array([0.0, 1.0, 0.0], dtype=np.float32)
)

# –í —Ü–∏–∫–ª–µ: –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ self.__view
```

---

### 3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ batch rendering –¥–ª—è –±–ª–æ–∫–æ–≤**
**–§–∞–π–ª:** [src/game/game_field.py](src/game/game_field.py#L18-L24)

```python
# ‚ùå –ü–õ–û–•–û: –ö–∞–∂–¥—ã–π –±–ª–æ–∫ - –æ—Ç–¥–µ–ª—å–Ω—ã–π draw call
def draw(self) -> None:
    for (bx, by), block in np.ndenumerate(self.field):
        if block:
            pos = self._get_block_position(bx, by)
            block.set_offset(pos[0], pos[1])
            block.draw()
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–∞ –ø–æ–ª–µ 61x34 ‚âà 2000 –±–ª–æ–∫–æ–≤. –ö–∞–∂–¥—ã–π –±–ª–æ–∫ = 1 draw call. –≠—Ç–æ **2000 draw calls –≤ –∫–∞–¥—Ä** –≤–º–µ—Å—Ç–æ 1!

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 30-50% –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ instanced rendering:
```python
# –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å data –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤ –∑–∞ —Ä–∞–∑
positions_data = []
for (bx, by), block in np.ndenumerate(self.field):
    if block:
        positions_data.append([bx * BLOCK_SIZE, by * BLOCK_SIZE])

# 1 draw call –≤–º–µ—Å—Ç–æ 2000
glDrawArraysInstanced(GL_TRIANGLE_FAN, 0, 4, len(positions_data))
```

---

### 4. **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ offset VBO –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä**
**–§–∞–π–ª:** [src/game/entities/block.py](src/game/entities/block.py#L40-L48)

```python
# ‚ùå –ü–õ–û–•–û: glBufferData –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
def set_offset(self, x: float, y: float) -> None:
    glBindBuffer(GL_ARRAY_BUFFER, self.__offset_vbo)
    offset_data = np.array([x, y], dtype=np.float32)
    glBufferData(GL_ARRAY_BUFFER, offset_data.nbytes, offset_data, GL_DYNAMIC_DRAW)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** 
1. `glBufferData()` = –ø–µ—Ä–µ–∞–ª–ª–æ–∫–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ GPU
2. –°—Ç–∞—Ç–∏—á–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –±–ª–æ–∫–æ–≤ (–æ–Ω–∏ –Ω–µ –¥–≤–∏–∂—É—Ç—Å—è), –Ω–æ –≤—ã –∏—Ö –æ–±–Ω–æ–≤–ª—è–µ—Ç–µ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
3. –≠—Ç–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –Ω–µ–Ω—É–∂–Ω–æ

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 5-10% –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –±–ª–æ–∫–æ–≤.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:** 
```python
# –ë–ª–æ–∫–∞–º –Ω–µ –Ω—É–∂–µ–Ω offset_vbo –≤–æ–æ–±—â–µ - –ø–æ–∑–∏—Ü–∏–∏ —Å—Ç–∞—Ç–∏—á–Ω—ã
# –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø–æ–∑–∏—Ü–∏—é —á–µ—Ä–µ–∑ uniform –≤ —Ü–∏–∫–ª–µ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
# –ò–õ–ò –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∞—Ç—Ä–∏—á–Ω—ã–π –±—É—Ñ–µ—Ä –¥–ª—è instanced rendering
```

---

### 5. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ glBindVertexArray(0) –ø–æ—Å–ª–µ draw**
**–§–∞–π–ª:** [src/engine/graphics/renderer_2d.py](src/engine/graphics/renderer_2d.py#L34-40)

```python
glBindVertexArray(vao)
glDrawArrays(GL_TRIANGLE_FAN, 0, vertex_count)
glBindVertexArray(0)  # ‚ùå –õ–∏—à–Ω–∏–π –≤—ã–∑–æ–≤
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Unbinding –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –µ—Å–ª–∏ –≤—ã –Ω–µ —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç VAO.

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** –ú–∏–∫—Ä–æ-–ø–æ—Ç–µ—Ä–∏, –Ω–æ —ç—Ç–æ –ø–ª–æ—Ö–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞.

---

### 6. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ glUseProgram() –≤—ã–∑–æ–≤—ã –ø–æ–¥—Ä—è–¥**
**–§–∞–π–ª:** [src/game/windows/game_window.py](src/game/windows/game_window.py#L168-185)

```python
glUseProgram(self.__3d_shader)
# ... —Ä–∏—Å—É–µ–º 3D ...

glUseProgram(self.__2d_shader)  # –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
# ... —Ä–∏—Å—É–µ–º 2D ...
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —à–µ–π–¥–µ—Ä–∞ - —ç—Ç–æ –¥–æ—Ä–æ–≥–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è. –õ—É—á—à–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –ø–æ —à–µ–π–¥–µ—Ä–∞–º.

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 1-2% (–º–∏–Ω–æ—Ä, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å).

---

## üü° –ü–†–û–ë–õ–ï–ú–´ –°–†–ï–î–ù–ï–ì–û –ü–†–ò–û–†–ò–¢–ï–¢–ê

### 7. **–ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞—è –º–∞—Ç—Ä–∏—á–Ω–∞—è –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞**
**–§–∞–π–ª:** [src/engine/graphics/renderer_3d.py](src/engine/graphics/renderer_3d.py#L57-62)

```python
model = OpenGL_3D_Utils.rotate(t)
translate = OpenGL_3D_Utils.translate(position[0], position[1], 0.0)
scale_mat = OpenGL_3D_Utils.scale(size[0], size[1], size[2])
mvp = projection @ view @ translate @ scale_mat @ model  # 4 –º–∞—Ç—Ä–∏—á–Ω—ã—Ö —É–º–Ω–æ–∂–µ–Ω–∏—è
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ—Å—á–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ä—É–∂–∏—è/–±–∞—Ñ—Ñ–∞ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Python NumPy —É–º–Ω–æ–∂–µ–Ω–∏–µ –≤–º–µ—Å—Ç–æ GPU.

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** 2-3% –¥–ª—è 10 –æ–±—ä–µ–∫—Ç–æ–≤ 3D.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:** 
```python
# –í—ã—á–∏—Å–ª—è–π—Ç–µ –Ω–∞ GPU –≤ –≤–µ—Ä—à–∏–Ω–Ω–æ–º —à–µ–π–¥–µ—Ä–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫—ç—à
# –î–ª—è –≤—Ä–∞—â–∞—é—â–∏—Ö—Å—è –æ–±—ä–µ–∫—Ç–æ–≤ - –ø—Ä–µ–æ—Ç—Ä–µ–Ω–¥–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞ —Ç–µ–∫—Å—Ç—É—Ä—É (–µ—Å–ª–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)
```

---

### 8. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ frustum culling**

**–ü—Ä–æ–±–ª–µ–º–∞:** –í—ã –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç–µ –í–°–ï –±–ª–æ–∫–∏, –¥–∞–∂–µ —Ç–µ —á—Ç–æ –∑–∞ –≥—Ä–∞–Ω–∏—Ü–µ–π —ç–∫—Ä–∞–Ω–∞.

**–ü–æ—Ç–µ—Ä—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:** –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∫–∞—Ä—Ç—ã, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å 10-20%.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:**
```python
# –§–∏–ª—å—Ç—Ä—É–π—Ç–µ –±–ª–æ–∫–∏ –ø–µ—Ä–µ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π
def draw(self) -> None:
    camera_rect = FloatRect(0, 0, GAME_FIELD_WIDTH, GAME_FIELD_HEIGHT)
    for (bx, by), block in np.ndenumerate(self.field):
        if block and block.rect.colliderect(camera_rect):  # –¢–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ
            block.draw()
```

---

### 10. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ VAO –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è**

**–ü—Ä–æ–±–ª–µ–º–∞:** VAO —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

**‚úÖ –†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –æ–¥–∏–Ω VAO –¥–ª—è –±–ª–æ–∫–æ–≤, –æ–¥–∏–Ω –¥–ª—è –ø—É–ª—å –∏ —Ç.–¥.

---

## üü¢ –•–û–†–û–®–ò–ï –ü–†–ê–ö–¢–ò–ö–ò (–∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Å–æ–±–ª—é–¥–∞–µ—Ç–µ)

‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `GL_STATIC_DRAW` –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –º–µ–Ω—è—é—Ç—Å—è  
‚úÖ –†–∞–∑–¥–µ–ª—è–µ—Ç–µ 2D –∏ 3D —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ depth testing –¥–ª—è 3D  
‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ blending –¥–ª—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏  
‚úÖ –®–µ–π–¥–µ—Ä—ã –Ω–∞–ø–∏—Å–∞–Ω—ã —Ä–∞–∑—É–º–Ω–æ (–Ω–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π)

---

## üìã –ü–†–ò–û–†–ò–¢–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ü–õ–ê–ù –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –ü—Ä–æ–±–ª–µ–º–∞ | –í—ã–∏–≥—Ä—ã—à | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----------|----------|---------|-----------|
| üî¥ **–í–´–°–û–ö–ò–ô** | Batch rendering –±–ª–æ–∫–æ–≤ (instanced) | **+30-50%** | –°—Ä–µ–¥–Ω—è—è |
| üî¥ **–í–´–°–û–ö–ò–ô** | –ö—ç—à uniform locations | **+5-10%** | –õ–µ–≥–∫–∞—è |
| üî¥ **–í–´–°–û–ö–ò–ô** | –£–±—Ä–∞—Ç—å –ø–µ—Ä–µ—Å—á–µ—Ç view –º–∞—Ç—Ä–∏—Ü—ã | **+2-3%** | –õ–µ–≥–∫–∞—è |
| üü° **–°–†–ï–î–ù–ò–ô** | Frustum culling | **+10-20%** | –õ–µ–≥–∫–∞—è |
| üü° **–°–†–ï–î–ù–ò–ô** | –£–±—Ä–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ offset VBO | **+5-10%** | –°—Ä–µ–¥–Ω—è—è |
| üü° **–°–†–ï–î–ù–ò–ô** | –¢–µ–∫—Å—Ç—É—Ä–Ω—ã–π –∞—Ç–ª–∞—Å | **+5-15%** | –°—Ä–µ–¥–Ω—è—è |
| üü¢ **–ù–ò–ó–ö–ò–ô** | –ú–∞—Ç—Ä–∏—á–Ω–æ–µ —É–º–Ω–æ–∂–µ–Ω–∏–µ –Ω–∞ GPU | **+2-3%** | –¢—è–∂–µ–ª–∞—è |

---

## üí° –û–ñ–ò–î–ê–ï–ú–´–ï –£–õ–£–ß–®–ï–ù–ò–Ø

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º ~60 FPS –ø—Ä–∏ –±–∞–∑–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ  
**–ü–æ—Å–ª–µ –≤—Å–µ—Ö –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:** ~100+ FPS (–∏–ª–∏ 60 FPS –ø—Ä–∏ 3x –±–æ–ª—å—à–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ–±—ä–µ–∫—Ç–æ–≤)

---

## üìù –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `nvidia-smi` –∏–ª–∏ GPU profiler —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞:
```bash
nvidia-smi dmon
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–æ–≤ OpenGL
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `apitrace` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –≤—Å–µ—Ö GL –≤—ã–∑–æ–≤–æ–≤:
```bash
apitrace trace --output trace.apitrace python src/main.py
apitrace dump trace.apitrace | grep -E "glDraw|glBind|glUniform"
```

### –¶–µ–ª–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- Draw calls: < 50 –≤ —Å–µ–∫—É–Ω–¥—É (—Ç–µ–∫—É—â–∏–π: ~2000+)
- GPU —Å—Ç–æ–ª: < 70% –¥–ª—è 60 FPS
- CPU —Å—Ç–æ–ª: < 50% –¥–ª—è 60 FPS

---

## üéØ –í–´–í–û–î–´

–í–∞—à –ø—Ä–æ–µ–∫—Ç:
- **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenGL** –Ω–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ–º —É—Ä–æ–≤–Ω–µ –¥–ª—è 2D –∏–≥—Ä—ã
- **–ò–º–µ–µ—Ç —è–≤–Ω—ã–µ —É–∑–∫–∏–µ –º–µ—Å—Ç–∞** –≤ batch rendering –±–ª–æ–∫–æ–≤
- **–ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω** –Ω–∞ 30-50% –±–µ–∑ –±–æ–ª—å—à–∏—Ö –ø–µ—Ä–µ–¥–µ–ª–æ–∫
- **–ì–æ—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - –∫–æ–¥ —á–∏—Å—Ç—ã–π –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π

**–ì–ª–∞–≤–Ω—ã–π –≤—Ä–∞–≥:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ batch rendering –¥–ª—è —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–±–ª–æ–∫–æ–≤).

---

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–Ω–∏—Ç–µ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ #1 (batch rendering –±–ª–æ–∫–æ–≤) - —ç—Ç–æ –¥–∞—Å—Ç –Ω–∞–∏–±–æ–ª—å—à–∏–π –ø—Ä–∏—Ä–æ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
